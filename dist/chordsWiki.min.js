if("undefined"==typeof jQuery)throw"Unable to find jQuery";if("undefined"==typeof chordsWiki)var chordsWiki={};!function(){"use strict";chordsWiki.Main=function(params){var CONST={CSS:{EAST_AREA:"east_area",WEST_AREA:"west_area",DETAILS_ROW:"details_row"},LABEL:{SUBTITLE_EAST:"Chord selection",SUBTITLE_WEST:"Chord details",PLEASE_SELECT_CHORD:"Please select a chord",PLEASE_SELECT_CATEGORY:"Please select a category",DETAILS_HEADING:"Notes: "},SELECTOR:{EAST_AREA:".east_area",WEST_AREA:".west_area",DETAILS_ROW:".details_row"},DATA_URL:"src/data/chordsData.json"},config={rootElement:$("body"),dataSource:chordsWiki.chordsData};$.extend(config,params);var self=this;this.container=$("<div>");var chordSelect=null,categorySelect=null,notesDetails=null,keyboard=null,init=function(){chordSelect=initializeSelect(chordSelect,CONST.LABEL.PLEASE_SELECT_CHORD),categorySelect=initializeSelect(categorySelect,CONST.LABEL.PLEASE_SELECT_CATEGORY),render(),config.rootElement.append(self.container),loadData(),attachEvents(),keyboard=new chordsWiki.keyboard.Main},initializeSelect=function(select,placeholder){select=$("<select>");var option=$("<option>");return option.text(placeholder),option.val(""),select.append(option),select},render=function(){var mainContent=$("<main>");mainContent.append(renderEast()),mainContent.append(renderWest()),self.container.append(mainContent)},renderEast=function(){var eastContainer=$("<div>");eastContainer.addClass(CONST.CSS.EAST_AREA);var subtitleEast=$("<h2>");return subtitleEast.text(CONST.LABEL.SUBTITLE_EAST),eastContainer.append(subtitleEast),eastContainer.append(chordSelect),eastContainer.append(categorySelect),eastContainer},renderWest=function(){var westContainer=$("<div>");westContainer.addClass(CONST.CSS.WEST_AREA);var subtitleWest=$("<h2>");return subtitleWest.text(CONST.LABEL.SUBTITLE_WEST),westContainer.append(subtitleWest),westContainer},loadData=function(){var data=config.dataSource;populateSelect(data.chord_types,chordSelect),populateSelect(data.chord_categories,categorySelect)},populateSelect=function(dataArray,selectObj){for(var i=0;i<dataArray.length;i++){var record=dataArray[i],option=$("<option>");option.text(record.label),option.val(record.id),selectObj.append(option)}},attachEvents=function(){chordSelect.change(function(){isSelectionValid(chordSelect)&&isSelectionValid(categorySelect)?displayChordDetails(notesLookup(chordSelect.val(),categorySelect.val())):cleanChordDetails()}),categorySelect.change(function(){isSelectionValid(categorySelect)&&isSelectionValid(chordSelect)?displayChordDetails(notesLookup(chordSelect.val(),categorySelect.val())):cleanChordDetails()})},isSelectionValid=function(select){return""!==select.val()},notesLookup=function(chord,category){var chordInstances=chordsWiki.chordsData.chord_instances;for(var c in chordInstances)if(chordInstances[c].chord_id===parseInt(chord)&&chordInstances[c].type_id===parseInt(category))return getNotesLabelByIds(chordInstances[c].notes);return!1},getNotesLabelByIds=function(noteIds){var notes=chordsWiki.chordsData.notes,labels=[];for(var n in notes)noteIds.indexOf(notes[n].id)>-1&&labels.push(notes[n].label);return labels},displayChordDetails=function(notes){null===notesDetails&&(notesDetails=$("<span>"),notesDetails.addClass(CONST.CSS.DETAILS_ROW),$(CONST.SELECTOR.WEST_AREA).append(notesDetails)),notesDetails.empty().text(CONST.LABEL.DETAILS_HEADING+notes.join())},cleanChordDetails=function(){null!==notesDetails&&notesDetails.empty()};init()}}(),"undefined"==typeof chordsWiki.chordsData&&(chordsWiki.chordsData={chord_instances:[{chord_id:0,type_id:0,notes:[1,7,13]},{chord_id:0,type_id:1,notes:[1,6,13]},{chord_id:1,type_id:0,notes:[4,11,16]},{chord_id:1,type_id:1,notes:[4,10,16]}],chord_types:[{id:0,label:"C"},{id:1,label:"D"}],chord_categories:[{id:0,label:"major"},{id:1,label:"minor"}],notes:[{id:0,label:"Cb"},{id:1,label:"C"},{id:2,label:"C#"},{id:3,label:"Db"},{id:4,label:"D"},{id:5,label:"D#"},{id:6,label:"Eb"},{id:7,label:"E"},{id:8,label:"E#"},{id:9,label:"Fb"},{id:10,label:"F"},{id:11,label:"F#"},{id:12,label:"Gb"},{id:13,label:"G"},{id:14,label:"G#"},{id:15,label:"Ab"},{id:16,label:"A"},{id:17,label:"A#"},{id:18,label:"Bb"},{id:19,label:"B"},{id:20,label:"B#"}]}),"undefined"==typeof chordsWiki.keyboard&&(chordsWiki.keyboard={}),function(){"use strict";chordsWiki.keyboard.Main=function(params){var config={};$.extend(config,params);this.container=$("<div>");var init=function(){console.log("keyboard initialized")};init()}}();
//# sourceMappingURL=chordsWiki.min.js.map
