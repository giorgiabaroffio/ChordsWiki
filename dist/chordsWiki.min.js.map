{"version":3,"sources":["chordsWiki.js","Wiki.js","chordsData.js","Keyboard.js"],"names":["chordsWiki","Wiki","params","CONST","CSS","EAST_AREA","WEST_AREA","DETAILS_ROW","LABEL","SUBTITLE_EAST","SUBTITLE_WEST","PLEASE_SELECT_CHORD","PLEASE_SELECT_CATEGORY","DETAILS_HEADING","SELECTOR","DATA_URL","config","rootElement","$","dataSource","chordsData","extend","self","this","container","chordSelect","categorySelect","init","initializeSelect","render","append","loadData","attachEvents","initInstrument","instrument","Keyboard","select","placeholder","option","text","val","mainContent","renderEast","renderWest","eastContainer","addClass","subtitleEast","westContainer","subtitleWest","data","populateSelect","chord_types","chord_categories","dataArray","selectObj","i","length","record","label","id","change","isSelectionValid","displayNotes","cleanNotes","CLEARFIX","WHITE_KEY","BLACK_KEY","NOTES","KEYS","instrumentChordsData","chord_instances","chord_id","type_id","notes","key","notesTextRow","createWhiteKey","addBlackKey","whiteKey","blackKey","keyboardContainer","notesLookup","chord","category","chordInstances","c","parseInt","getNotesLabelByIds","noteIds","labels","n","indexOf","push","getNotesKeysByIds","keys","notesLabels","empty","join"],"mappings":"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","file":"chordsWiki.min.js","sourcesContent":["/* jshint camelcase: false*/\r\nif (typeof(jQuery) === 'undefined') {\r\n\tthrow('Unable to find jQuery');\r\n}\r\n\r\nif (typeof(chordsWiki) === 'undefined') {\r\n\t/* jshint ignore:start */\r\n\tvar chordsWiki = {};\r\n\t/* jshint ignore:end */\r\n}","(function() {\r\n\t'use strict';\r\n\r\n\tchordsWiki.Wiki = function(params) {\r\n\r\n\t\tvar CONST = {\r\n\t\t\tCSS: {\r\n\t\t\t\tEAST_AREA: 'east_area',\r\n\t\t\t\tWEST_AREA: 'west_area',\r\n\t\t\t\tDETAILS_ROW: 'details_row'\r\n\t\t\t},\r\n\t\t\tLABEL: {\r\n\t\t\t\tSUBTITLE_EAST: 'Chord selection',\r\n\t\t\t\tSUBTITLE_WEST: 'Chord details',\r\n\t\t\t\tPLEASE_SELECT_CHORD: 'Please select a chord',\r\n\t\t\t\tPLEASE_SELECT_CATEGORY: 'Please select a category',\r\n\t\t\t\tDETAILS_HEADING: 'Notes: '\r\n\t\t\t},\r\n\t\t\tSELECTOR: {\r\n\t\t\t\tEAST_AREA: '.east_area',\r\n\t\t\t\tWEST_AREA: '.west_area',\r\n\t\t\t\tDETAILS_ROW: '.details_row'\r\n\t\t\t},\r\n\t\t\tDATA_URL: 'src/data/chordsData.json'\r\n\t\t};\r\n\r\n\t\tvar config = {\r\n\t\t\trootElement: $('body'),\r\n\t\t\tdataSource: chordsWiki.chordsData\r\n\t\t};\r\n\r\n\t\t$.extend(config, params);\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis.container = $('<div>');\r\n\r\n\t\tvar chordSelect = null;\r\n\t\tvar categorySelect = null;\r\n\r\n\t\tvar init = function() {\r\n\t\t\tchordSelect = initializeSelect(chordSelect, CONST.LABEL.PLEASE_SELECT_CHORD);\r\n\t\t\tcategorySelect = initializeSelect(categorySelect, CONST.LABEL.PLEASE_SELECT_CATEGORY);\r\n\t\t\trender();\r\n\t\t\tconfig.rootElement.append(self.container);\r\n\t\t\tloadData();\r\n\t\t\tattachEvents();\r\n\t\t\tinitInstrument();\r\n\r\n\t\t};\r\n\r\n\t\tvar initInstrument = function() {\r\n\t\t\tif (typeof(config.instrument) === 'undefined'){\r\n\t\t\t\tconfig.instrument = new chordsWiki.Keyboard();\r\n\t\t\t}\r\n\t\t\t$(CONST.SELECTOR.WEST_AREA).append(config.instrument.container);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Initialize select field\r\n\t\t */\r\n\t\tvar initializeSelect = function(select, placeholder) {\r\n\r\n\t\t\tselect = $('<select>');\r\n\t\t\tvar option = $('<option>');\r\n\t\t\toption.text(placeholder);\r\n\t\t\toption.val('');\r\n\t\t\tselect.append(option);\r\n\t\t\treturn select;\r\n\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Render the UI\r\n\t\t */\r\n\t\tvar render = function() {\r\n\r\n\t\t\t//Main content wrapper creation\r\n\t\t\tvar mainContent = $('<main>');\r\n\r\n\t\t\t//Append east and west areas to mainContent\r\n\t\t\tmainContent.append(renderEast());\r\n\t\t\tmainContent.append(renderWest());\r\n\r\n\t\t\t//Append mainContent to container\r\n\t\t\tself.container.append(mainContent);\r\n\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Render the east area of the UI\r\n\t\t */\r\n\t\tvar renderEast = function() {\r\n\r\n\t\t\tvar eastContainer = $('<div>');\r\n\t\t\teastContainer.addClass(CONST.CSS.EAST_AREA);\r\n\t\t\tvar subtitleEast = $('<h2>');\r\n\t\t\tsubtitleEast.text(CONST.LABEL.SUBTITLE_EAST);\r\n\t\t\teastContainer.append(subtitleEast);\r\n\t\t\teastContainer.append(chordSelect);\r\n\t\t\teastContainer.append(categorySelect);\r\n\t\t\treturn eastContainer;\r\n\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Render the west area of the UI\r\n\t\t */\r\n\t\tvar renderWest = function() {\r\n\r\n\t\t\tvar westContainer = $('<div>');\r\n\t\t\twestContainer.addClass(CONST.CSS.WEST_AREA);\r\n\t\t\tvar subtitleWest = $('<h2>');\r\n\t\t\tsubtitleWest.text(CONST.LABEL.SUBTITLE_WEST);\r\n\t\t\twestContainer.append(subtitleWest);\r\n\t\t\treturn westContainer;\r\n\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Load data via chordsData object (default option) or via an external json object\r\n\t\t */\r\n\t\tvar loadData = function() {\r\n\t\t\tvar data = config.dataSource;\r\n\t\t\tpopulateSelect(data.chord_types, chordSelect);\r\n\t\t\tpopulateSelect(data.chord_categories, categorySelect);\r\n\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Populate select field given the data array and the select object\r\n\t\t */\r\n\t\tvar populateSelect = function(dataArray, selectObj) {\r\n\t\t\tfor (var i = 0; i < dataArray.length; i++) {\r\n\t\t\t\tvar record = dataArray[i];\r\n\t\t\t\tvar option = $('<option>');\r\n\t\t\t\toption.text(record.label);\r\n\t\t\t\toption.val(record.id);\r\n\t\t\t\tselectObj.append(option);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Attach events to UI elements\r\n\t\t */\r\n\t\tvar attachEvents = function() {\r\n\r\n\t\t\tchordSelect.change(function() {\r\n\t\t\t\tif (isSelectionValid(chordSelect) && isSelectionValid(categorySelect)) {\r\n\t\t\t\t\tconfig.instrument.displayNotes(chordSelect.val(),categorySelect.val());\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tconfig.instrument.cleanNotes();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcategorySelect.change(function() {\r\n\t\t\t\tif (isSelectionValid(categorySelect) && isSelectionValid(chordSelect)) {\r\n\t\t\t\t\tconfig.instrument.displayNotes(chordSelect.val(),categorySelect.val());\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tconfig.instrument.cleanNotes();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Check if the selected option is valid (is not the placeholder)\r\n\t\t */\r\n\t\tvar isSelectionValid = function(select) {\r\n\t\t\treturn select.val() !== '';\r\n\t\t};\r\n\r\n\t\tinit();\r\n\r\n\t};\r\n\r\n}());","/* jshint camelcase: false, quotmark: double */\r\n\r\nif (typeof(chordsWiki.chordsData) === \"undefined\") {\r\n\r\n\tchordsWiki.chordsData = {\r\n\t\t\"chord_types\": [\r\n\t\t\t{\r\n\t\t\t\t\"id\": 0,\r\n\t\t\t\t\"label\": \"C\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"id\": 1,\r\n\t\t\t\t\"label\": \"D\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"chord_categories\": [\r\n\t\t\t{\r\n\t\t\t\t\"id\": 0,\r\n\t\t\t\t\"label\": \"major\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"id\": 1,\r\n\t\t\t\t\"label\": \"minor\"\r\n\t\t\t}\r\n\t\t]\r\n\t};\r\n\r\n}","if (typeof(chordsWiki.Keyboard) === 'undefined') {\r\n\t/* jshint ignore:start */\r\n\tchordsWiki.Keyboard = {};\r\n\t/* jshint ignore:end */\r\n}\r\n\r\n(function() {\r\n\t'use strict';\r\n\r\n\tchordsWiki.Keyboard = function(params) {\r\n\r\n\t\tvar CONST = {\r\n\t\t\tCSS: {\r\n\t\t\t\tCLEARFIX: 'clearfix',\r\n\t\t\t\tWHITE_KEY: 'key',\r\n\t\t\t\tBLACK_KEY: 'black_key'\r\n\t\t\t},\r\n\t\t\tLABEL: {\r\n\t\t\t\tNOTES: 'Notes',\r\n\t\t\t\tKEYS: 'Keys'\r\n\t\t\t},\r\n\t\t\tSELECTOR: {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar config = {\r\n\r\n\t\t};\r\n\r\n\t\t$.extend(config, params);\r\n\r\n\t\tthis.container = $('<div>');\r\n\r\n\t\t/* jshint ignore:start */\r\n\t\tvar instrumentChordsData = {\r\n\t\t\t\"chord_instances\": [{\r\n\t\t\t\t\"chord_id\": 0,\r\n\t\t\t\t\"type_id\": 0,\r\n\t\t\t\t\"notes\": [1, 7, 13]\r\n\t\t\t}, {\r\n\t\t\t\t\"chord_id\": 0,\r\n\t\t\t\t\"type_id\": 1,\r\n\t\t\t\t\"notes\": [1, 6, 13]\r\n\t\t\t}, {\r\n\t\t\t\t\"chord_id\": 1,\r\n\t\t\t\t\"type_id\": 0,\r\n\t\t\t\t\"notes\": [4, 11, 16]\r\n\t\t\t}, {\r\n\t\t\t\t\"chord_id\": 1,\r\n\t\t\t\t\"type_id\": 1,\r\n\t\t\t\t\"notes\": [4, 10, 16]\r\n\t\t\t}\r\n\r\n\t\t\t],\r\n\t\t\t\"notes\": [{\r\n\t\t\t\t\"id\": 0,\r\n\t\t\t\t\"label\": \"Cb\",\r\n\t\t\t\t\"key\": 11\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 1,\r\n\t\t\t\t\"label\": \"C\",\r\n\t\t\t\t\"key\": 0\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 2,\r\n\t\t\t\t\"label\": \"C#\",\r\n\t\t\t\t\"key\": 1\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 3,\r\n\t\t\t\t\"label\": \"Db\",\r\n\t\t\t\t\"key\": 1\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 4,\r\n\t\t\t\t\"label\": \"D\",\r\n\t\t\t\t\"key\": 2\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 5,\r\n\t\t\t\t\"label\": \"D#\",\r\n\t\t\t\t\"key\": 3\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 6,\r\n\t\t\t\t\"label\": \"Eb\",\r\n\t\t\t\t\"key\": 3\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 7,\r\n\t\t\t\t\"label\": \"E\",\r\n\t\t\t\t\"key\": 4\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 8,\r\n\t\t\t\t\"label\": \"E#\",\r\n\t\t\t\t\"key\": 5\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 9,\r\n\t\t\t\t\"label\": \"Fb\",\r\n\t\t\t\t\"key\": 4\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 10,\r\n\t\t\t\t\"label\": \"F\",\r\n\t\t\t\t\"key\": 5\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 11,\r\n\t\t\t\t\"label\": \"F#\",\r\n\t\t\t\t\"key\": 6\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 12,\r\n\t\t\t\t\"label\": \"Gb\",\r\n\t\t\t\t\"key\": 6\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 13,\r\n\t\t\t\t\"label\": \"G\",\r\n\t\t\t\t\"key\": 7\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 14,\r\n\t\t\t\t\"label\": \"G#\",\r\n\t\t\t\t\"key\": 8\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 15,\r\n\t\t\t\t\"label\": \"Ab\",\r\n\t\t\t\t\"key\": 8\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 16,\r\n\t\t\t\t\"label\": \"A\",\r\n\t\t\t\t\"key\": 9\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 17,\r\n\t\t\t\t\"label\": \"A#\",\r\n\t\t\t\t\"key\": 10\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 18,\r\n\t\t\t\t\"label\": \"Bb\",\r\n\t\t\t\t\"key\": 10\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 19,\r\n\t\t\t\t\"label\": \"B\",\r\n\t\t\t\t\"key\": 11\r\n\t\t\t}, {\r\n\t\t\t\t\"id\": 20,\r\n\t\t\t\t\"label\": \"B#\",\r\n\t\t\t\t\"key\": 0\r\n\t\t\t}]\r\n\t\t};\r\n\t\t/* jshint ignore:end */\r\n\r\n\t\tvar notesTextRow = null;\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar init = function() {\r\n\t\t\tself.container.append(render());\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Create the key object\r\n\t\t */\r\n\t\tvar createWhiteKey = function(addBlackKey) {\r\n\t\t\tvar whiteKey = $('<div>');\r\n\t\t\twhiteKey.addClass(CONST.CSS.WHITE_KEY);\r\n\t\t\tif (addBlackKey === true) {\r\n\t\t\t\tvar blackKey = $('<div>');\r\n\t\t\t\tblackKey.addClass(CONST.CSS.BLACK_KEY);\r\n\t\t\t\twhiteKey.append(blackKey);\r\n\t\t\t}\r\n\t\t\treturn whiteKey;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Render the UI of the keyboard\r\n\t\t */\r\n\t\tvar render = function() {\r\n\t\t\tvar keyboardContainer = $('<div>');\r\n\t\t\tkeyboardContainer.addClass(CONST.CSS.CLEARFIX);\r\n\r\n\t\t\tkeyboardContainer.append(createWhiteKey(true));\r\n\t\t\tkeyboardContainer.append(createWhiteKey(true));\r\n\t\t\tkeyboardContainer.append(createWhiteKey(false));\r\n\t\t\tkeyboardContainer.append(createWhiteKey(true));\r\n\t\t\tkeyboardContainer.append(createWhiteKey(true));\r\n\t\t\tkeyboardContainer.append(createWhiteKey(true));\r\n\t\t\tkeyboardContainer.append(createWhiteKey(false));\r\n\t\t\t\r\n\t\t\treturn keyboardContainer;\r\n\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Retrieve the set of notes given the chord and the category\r\n\t\t */\r\n\t\tvar notesLookup = function(chord, category) {\r\n\t\t\tvar chordInstances = instrumentChordsData.chord_instances;\r\n\t\t\tfor (var c in chordInstances) {\r\n\t\t\t\tif (chordInstances[c].chord_id === parseInt(chord) && chordInstances[c].type_id === parseInt(category)) {\r\n\t\t\t\t\treturn chordInstances[c].notes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get notes labels by ids\r\n\t\t */\r\n\t\tvar getNotesLabelByIds = function(noteIds) {\r\n\t\t\tvar notes = instrumentChordsData.notes;\r\n\t\t\tvar labels = [];\r\n\t\t\tfor (var n in notes) {\r\n\t\t\t\tif (noteIds.indexOf(notes[n].id) > -1) {\r\n\t\t\t\t\tlabels.push(notes[n].label);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn labels;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get keys given the notes array\r\n\t\t */\r\n\t\tvar getNotesKeysByIds = function(noteIds) {\r\n\t\t\tvar notes = instrumentChordsData.notes;\r\n\t\t\tvar keys = [];\r\n\t\t\tfor (var n in notes) {\r\n\t\t\t\tif (noteIds.indexOf(notes[n].id) > -1) {\r\n\t\t\t\t\tkeys.push(notes[n].key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn keys;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Display notes on keyboard\r\n\t\t */\r\n\t\tthis.displayNotes = function(chord, category) {\r\n\t\t\tvar notes = notesLookup(chord, category);\r\n\t\t\tvar notesLabels = getNotesLabelByIds(notes);\r\n\t\t\tvar keys = getNotesKeysByIds(notes);\r\n\t\t\tif (notesTextRow === null) {\r\n\t\t\t\tnotesTextRow = $('<span>');\r\n\t\t\t\tself.container.append(notesTextRow);\r\n\t\t\t}\r\n\t\t\tnotesTextRow.empty().text(CONST.LABEL.NOTES + ' ' + notesLabels.join() + ' ' + CONST.LABEL.KEYS + ' ' + keys.join());\r\n\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Clean notes on keyboard\r\n\t\t */\r\n\t\tthis.cleanNotes = function() {\r\n\t\t\tif (notesTextRow !== null) {\r\n\t\t\t\tnotesTextRow.empty();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tinit();\r\n\r\n\t};\r\n\r\n}());"],"sourceRoot":"."}